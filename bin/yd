#!/usr/bin/env node
const figlet = require('figlet');
const Printer = require("@darkobits/lolcatjs");
const txt = figlet.textSync("wan shi fu") + "\n" + "    è¾¾æ–‡è¥¿è„šæ‰‹æ¶";
const prograrm = require("commander");
const inquirer = require('inquirer');
const chalk = require('chalk');
const json2ts = require("json2ts");
// const ora  = require('ora');
const userHone = require('userHone');
const shell = require('shelljs');


prograrm.version(Printer.fromString(txt), "-v,--version");
prograrm.option("-i,--init", "ğŸ¶åˆå§‹åŒ–é¡¹ç›®");
const bindHandler = {
    init() {
        inquirer
            .prompt([
                {
                    type: 'type',
                    message: 'ğŸ“ƒ è¯·è¾“å…¥æ–‡ä»¶å¤¹åç§°',
                    name: 'dirname'
                },
                /* Pass your questions in here */
                {
                    name: "jskind",
                    type: "list",
                    message: "è¯·ä½¿ç”¨è¯¥é¡¹ç›®è¯­è¨€",
                    choices: ["âœ”ES6", "âœ”TypeScript"]
                }
            ])
            .then((answers) => {
                // Use user feedback for... whatever!!
                console.log(answers);
                const __dirname = answers.__dirname
                if (__dirname) {
                    
                }
            })
            .catch((error) => {
                if (error.isTtyError) {
                    // Prompt couldn't be rendered in the current environment
                } else {
                    // Something else went wrong
                }
            });
    },
    json2ts(jsonurl) {
        // const spinner = ora('â° æ­£åœ¨å¸®å¤§å“¥ç”Ÿæˆä»£ç ä¸­ï¼Œè¯·ç¨åã€‚ã€‚ã€‚');
        // spinner.start();
        const jsonContent = {
            code: 1,
            info: {
                message: "è¯·æ±‚æˆåŠŸ",
                data: [{
                    num: 1,
                    title: "3å·ä»“åº“"
                }]
            }
        }
        let result = json2ts.convert(JSON.stringify(jsonContent));
        console.log(result);
    }
};
prograrm.usage("<cmd> [env]")
    .arguments("<cmd> [env]")
    .action(function (cmd, otherParams) {
        const handler = bindHandler[cmd];
        if (handler) {
            handler();
        } else {
            // console.log("æš‚æœªå®ç°" + cmd);
            console.log(chalk.yellow("ğŸ™ éå¸¸é—æ†¾") + "ã€" + chalk.red(cmd) + "ã€‘" + chalk.yellow("æš‚æœªå®ç°"));
        }
    });
prograrm.parse(process.argv);